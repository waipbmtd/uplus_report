# 索引   
---   

#### [前端接口索引](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%89%8D%E7%AB%AF%E6%8E%A5%E5%8F%A3)  

+ [登录](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E7%99%BB%E5%BD%95)  
+ [登出](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E7%99%BB%E5%87%BA)  
+ [获取关联信息](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E5%85%B3%E8%81%94%E4%BF%A1%E6%81%AF)
+ [获取入口MOD枚举](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E5%85%A5%E5%8F%A3mod%E6%9E%9A%E4%B8%BE)
+ [剩余未处理的举报数](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%89%A9%E4%BD%99%E6%9C%AA%E5%A4%84%E7%90%86%E7%9A%84%E4%B8%BE%E6%8A%A5%E6%95%B0)
+ [获取下一批相册图片](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%8B%E4%B8%80%E6%89%B9%E7%9B%B8%E5%86%8C%E5%9B%BE%E7%89%87)
+ [获取下一个被举报message](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%8B%E4%B8%80%E4%B8%AA%E8%A2%AB%E4%B8%BE%E6%8A%A5message)
+ [获取被举报用户详情](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E8%A2%AB%E4%B8%BE%E6%8A%A5%E7%94%A8%E6%88%B7%E8%AF%A6%E6%83%85)
+ [处罚](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%A4%84%E7%BD%9A%E6%8E%A5%E5%8F%A3)
+ [通过](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E9%80%9A%E8%BF%87)
+ [大厅解除禁言](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%A4%A7%E5%8E%85%E8%A7%A3%E9%99%A4%E7%A6%81%E8%A8%80)
+ [秀场解除禁言](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E7%A7%80%E5%9C%BA%E8%A7%A3%E9%99%A4%E7%A6%81%E8%A8%80)
+ [秀场解除封禁](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E7%A7%80%E5%9C%BA%E8%A7%A3%E9%99%A4%E5%B0%81%E7%A6%81)
+ [用户解除封禁](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E7%94%A8%E6%88%B7%E8%A7%A3%E9%99%A4%E5%B0%81%E7%A6%81)
+ [消息举报结束](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%B6%88%E6%81%AF%E4%B8%BE%E6%8A%A5%E7%BB%93%E6%9D%9F)
+ [获取所有高危用户列表](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E9%AB%98%E5%8D%B1%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8)
+ [添加一个高危用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E9%AB%98%E5%8D%B1%E7%94%A8%E6%88%B7)
+ [获取一个高危用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E9%AB%98%E5%8D%B1%E7%94%A8%E6%88%B7)
+ [删除一个高危用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E9%AB%98%E5%8D%B1%E7%94%A8%E6%88%B7)
+ [获取所有特殊用户列表](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E7%89%B9%E6%AE%8A%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8)
+ [添加一个特殊用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%94%A8%E6%88%B7)
+ [获取一个特殊用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%94%A8%E6%88%B7)
+ [删除一个特殊用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%94%A8%E6%88%B7)
+ [添加系统用户](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%B7%BB%E5%8A%A0%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7)
+ [获取系统用户列表(管理员可以获得所有用户，编辑只能自己)](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%BE%97%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E7%BC%96%E8%BE%91%E5%8F%AA%E8%83%BD%E8%87%AA%E5%B7%B1)
+ [获取系统用户用户名和ID列表(管理员可以获得所有用户，编辑只能自己)](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8Cid%E5%88%97%E8%A1%A8%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%BE%97%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E7%BC%96%E8%BE%91%E5%8F%AA%E8%83%BD%E8%87%AA%E5%B7%B1)
+ [获取指定客服日志列表详细信息(管理员可以获得所有用户日志，编辑只能自己)](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E5%AE%A2%E6%9C%8D%E6%97%A5%E5%BF%97%E5%88%97%E8%A1%A8%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF-%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%BE%97%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E6%97%A5%E5%BF%97%E7%BC%96%E8%BE%91%E5%8F%AA%E8%83%BD%E8%87%AA%E5%B7%B1)
+ [获取友加用户惩罚日志](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E5%8F%8B%E5%8A%A0%E7%94%A8%E6%88%B7%E6%83%A9%E7%BD%9A%E6%97%A5%E5%BF%97)
+ [获取友加客服操作报表(admin可以获取所有，editor只能自己)](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E5%8F%8B%E5%8A%A0%E5%AE%A2%E6%9C%8D%E6%93%8D%E4%BD%9C%E6%8A%A5%E8%A1%A8admin%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89editor%E5%8F%AA%E8%83%BD%E8%87%AA%E5%B7%B1)
+ [用户名是否可用](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%A3%80%E6%9F%A5%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%90%8D%E6%98%AF%E5%90%A6%E8%A2%AB%E4%BD%BF%E7%94%A8)
+ [获取举报Profile](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%BE%E6%8A%A5profile)

#### [server接口索引](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#server%E6%8E%A5%E5%8F%A3)   
+ [获取一批新的像册待审核图片](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%80%E6%89%B9%E6%96%B0%E7%9A%84%E5%83%8F%E5%86%8C%E5%BE%85%E5%AE%A1%E6%A0%B8%E5%9B%BE%E7%89%87)
+ [获取下一条被举报消息记录](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%8B%E4%B8%80%E6%9D%A1%E8%A2%AB%E4%B8%BE%E6%8A%A5%E6%B6%88%E6%81%AF%E8%AE%B0%E5%BD%95)
+ [获取被举报用户详情](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E8%A2%AB%E4%B8%BE%E6%8A%A5%E7%94%A8%E6%88%B7%E8%AF%A6%E6%83%85-1)
+ [剩余未处理的举报数](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%89%A9%E4%BD%99%E6%9C%AA%E5%A4%84%E7%90%86%E7%9A%84%E4%B8%BE%E6%8A%A5%E6%95%B0-1)
+ [所有剩余未处理的举报数（长连推送）](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%89%80%E6%9C%89%E5%89%A9%E4%BD%99%E6%9C%AA%E5%A4%84%E7%90%86%E7%9A%84%E4%B8%BE%E6%8A%A5%E6%95%B0%E9%95%BF%E8%BF%9E%E6%8E%A8%E9%80%81)
+ [获取友加用户惩罚日志](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E5%8F%8B%E5%8A%A0%E7%94%A8%E6%88%B7%E6%83%A9%E7%BD%9A%E6%97%A5%E5%BF%97-1)
+ [获取客服操作报表](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%9C%8D%E6%93%8D%E4%BD%9C%E6%8A%A5%E8%A1%A8)
+ [获取举报Profile](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E8%8E%B7%E5%8F%96%E4%B8%BE%E6%8A%A5profile-1)

#### [其他](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E5%85%B6%E5%AE%83)    
+ [**处罚接口**与**被举报message**参数对照](https://github.com/youjia/youjia-api/blob/master/docs/report-profile-punish.JPG "参数图解") 
+ [消息惩罚二级关联](http://gitlab.youja.cn/xuefeng.dai/py_uplus_report/blob/master/docs/report_front_end.md#%E6%B6%88%E6%81%AF%E6%83%A9%E7%BD%9A%E4%BA%8C%E7%BA%A7%E5%85%B3%E8%81%94)  

# 前端接口

###  WEB接口
---

#####  登录  
POST   /login   

参数：
   * 必选：  
      username : 用户名    
      password : 密码    
   *  可选：   
      next : 登录之后访问的路径，默认为“/”    

返回：  
>
        跳转到"index.html"
        
        
#####  登出  
POST   /logout      

参数：
   * 必选：  
   *  可选：   

返回：  
>
        跳转到"login.html"


#####获取关联信息  
GET   /punish_enum_relation   

参数：

返回：  
>
    {ret:1,
         info:'',
    data:{
         "reasons": 违规类型列表
             [{"id": , 违规类型ID
                "title": 违规类型title
            },
            { ...  }  …
            ],
         "module_types": 处罚业务单元
             [{"id": , 处罚业务单元ID
                "title": 处罚业务单元title,
                "punishes" : 有效的处罚类型
                      [{"id": , 违规类型ID
                        "title": 违规类型title
                        "required_time": 是否需要指定时间（True/False）
                      },
                      { ...  }  …
                      ]
               },
               {…},  …
            ]
         }
          }
          
          
#####获取入口MOD枚举  
GET   /enum/entrance_mod   

参数：

返回：  
>
    {ret:1,
         info:'',
    data:{
        '11' : '大厅消息',
        '12' : '私聊消息'
         }
        }

#####  剩余未处理的举报数
POST   /report/remain 

参数：
   * 必选：        
   * 可选： 
     report_type : 是否高危（ 0:普通，1：高危, 2:资源 default=0）

返回：  
>
        {"ret":0,"data":{"msg_remain":1789,"album_remain":2127}}  
        
#####  所有剩余未处理的举报数（长连推送）
GET   /report/remain/all 

返回：  
>
        {"ret":0,"data":[ {"msg_remain":1789,"album_remain":2127},   #report_type=0
                  {"msg_remain":1789,"album_remain":2127},   #report_type=1
                  {"msg_remain":1789,"album_remain":2127}    #report_type=2
                ]
        }  
        

#####获取下一批相册图片
GET /report/album_image/list   

参数：
   * 可选：    
      size : 一次拉的图片数（default=20）  
      report_type : 是否高危（ 0:普通，1：高危, 2:资源 default=0）

返回：  
>
返回值:
>
    {ret:1,
    info: ''
    data:{
          [{  id : 关联举报记录 的id(唯一标识符)，
              url: 图片的url，
              thumb_url： 图片缩略图url
              reporter: 举报者，
              u_id: 被举报的人， 
              mod: 举报入口
          mid: 模块ID
              },{...},...]     
        }
        }

##### 获取下一个视频
GET /report/video/next    

参数： 
   * 必选：   
      report_type : 是否高危（ 1：高危, 2:资源）     

   * 必选：    
      resource_type : 视频来源类型（ 303：私聊, 304:群， 305：秀场, default=305）     
  
返回值:
>
    {ret:1,
    info: ''
    data:{
          [{  id : 关联举报记录 的id(唯一标识符)，
              url: 视频的url，
              reporter: 举报者，
              u_id: 被举报的人， 
              mod: 举报入口
              mid: 模块ID
              }]     
        }
        }
        

#####获取下一个被举报message
GET /report/message/next   

参数：  
   * 可选：   
     report_type : 是否高危（ 0:普通，1：高危, 2:资源 default=0） 

返回值:
>
    {ret:1,
    info: ''
    data:{
        id:{举报记录id},  #int
        mod：{功能模块},  #int
        reporter:{举报人id}, #string
        type:[1,2,3], # list int
        buid:{被举报人ID },#string
        avatar_url:{缩略图},#只有群有缩略图
        memo:{扩充字段}  #string
        msgs:
            [
        {   msg_type:{消息类型}, #int
            msgid:{内容id}, #string
            uucid:{uucid},   #string
            senderid:{发送者id}, #string
            url:{资源URL}, #string
            thumburl:{缩略图} #string
            content:{消息内容}
        }，
            ], #string
        profile:{
            mid:{场所iD（ 群id、秀场id）}, #string
            oid:{owner id} #string
            name:{名字}  #string
            desc:{描述}  #string
            }
        }
        }
        
##### 获取被举报用户详情：  
GET user/profile   

参数：   
   * 必选：       
     u_id : u+用户id   

返回值:      
>
    {ret:1,
    info: ''
    data:{
        user_id:{友加用户ID} #int
        user_name:{友加用户名昵称}  #string
        user_desc:{友加用户名简介}  #string
            user_avatar_url:{友加用户头像地址} #url 
        punish_image:{被处罚图片数}               
        punish_video:{被处罚视频数} 
        punish_audio:{被处罚音频数}
        punish_text:{被处罚文本数}  
        }
        }

        
##### 处罚接口
POST  /punish

参数 ：
  *   必选：    
       module_type ： 处罚的业务单元（1大厅，2秀场，3群, 4用户）    
       punish_type  :  处罚的类型 （    101: '禁言', 102: '关闭秀场',103: '删除资源',104: '登录限制',105: '解散群',106: '踢出群',）    
       reason： 处罚的原因（    1: "广告",2: "色情", 3: "敏感话题",）    
       reporter： 举报人ID    
       u_id ： 被举报人ID    
       id : 举报记录表的ID    
       mod： 举报入口ID    
       
       
  *  可选：   
       timedelta  ： 处罚的时长（缺省-1,表示永久）   
       memo : 处罚的备注解释   
       url  ： 资源url   
       thumb_url: （对图片/视频而言为缩略图URL）  
       content: 文字     
       module_id：秀场/群的ID    
       msg_id： 消息的ID    
       owner： 拥有者ID   
       

   返回：  
   >      {ret:1,info:'',code:''}    
 
        
##### 通过
POST  /pass

参数 ：
  *   必选：    
       reporter： 举报人ID    
       u_id ： 被举报人ID    
       id : 举报记录表的ID    
       mod： 举报入口ID    
       
  *  可选：   
       url  ： 资源url   
       thumb_url: （对图片/视频而言为缩略图URL）   
       content: (如果是文字)
       module_id：秀场/群的ID    
       msg_id： 消息的ID    
       owner： 拥有者ID    

   返回：  
   >      {ret:1,info:'',code:''}   
   
   
#####  大厅解除禁言  
POST   /hall/open_mouth  

参数：
   * 必选：  
      u_id : 用户ID         
   *  可选：   
      memo : 备注  

返回：  
>
        {ret:0}


#####  秀场解除禁言   
POST   /show/open_mouth 

参数：
   * 必选：  
      show_id : 秀场ID         
   *  可选：   
      memo : 备注  

返回：  
>
        {ret:0}


#####  秀场解除封禁      
POST   /show/un_clock

参数：
   * 必选：  
      show_id : 秀场ID         
   *  可选：   
      memo : 备注  

返回：  
>
        {ret:0}


#####  用户解除封禁      
POST   /user/un_clock

参数：
   * 必选：  
      u_id : 秀场ID        
   *  可选：   
      memo : 备注  

返回：  
>
        {ret:0}
        
        
#####  消息举报结束   
GET /report/end   

参数：   
 *  必选:   
     id : id   
 *  可选:    
     report_type : 是否高危（ 0:普通，1：高危, 2:资源 default=0）  

返回：  
 >   {ret:0}    
        
#####  获取所有高危用户列表        
GET   /user/risk/list  

参数：  
   * 必选：  

返回：   
>
        {ret:0, data={[
        {user_id: 用户ID,  
        create_time:创建时间  
        },{...},...  
        ]
    }}


#####  添加一个高危用户      
POST   /user/risk

参数：
   * 必选：  
      user_id : 用户id        

返回：  
>
        {ret:0}


#####  获取一个高危用户      
GET   /user/risk

参数：
   * 必选：  
      user_id : 用户id        

返回：  
>
        {ret:0, data={user_id: 用户ID  
        create_time: 创建时间  
    }}

#####  删除一个高危用户       
DELETE   /user/risk 

参数：
   * 必选：  
      user_id : 用户id          

返回：  
>
        {ret:0, data={user_id: 用户ID  
    }}  

#####  获取所有特殊用户列表        
GET   /user/special/list  

参数：  
   * 必选：  

返回：   
>
        {ret:0, data={[
        {user_id: 用户ID,  
        create_time:创建时间  
        },{...},...  
        ]
    }}


#####  添加一个特殊用户      
POST   /user/special

参数：
   * 必选：  
      user_id : 用户id        

返回：  
>
        {ret:0}


#####  获取一个特殊用户      
GET   /user/special

参数：
   * 必选：  
      user_id : 用户id        

返回：  
>
        {ret:0, data={user_id: 用户ID  
        create_time: 创建时间  
    }}

#####  删除一个特殊用户       
DELETE   /user/special 

参数：
   * 必选：  
      user_id : 用户id          

返回：  
>
        {ret:0, data={user_id: 用户ID  
    }}  
    
##### 添加系统用户 
POST   /user  

参数：
   * 必选：    
     username : 用户名  
     password :密码  
   * 可选 :  
     real_name : 真实姓名 
     role: 角色（有效值：admin，editor, default:editor）  
     state: 激活状态(0:没有激活，1：已激活， default:1)  
返回：

>    {"ret":0}

    
#####  获取系统用户列表(管理员可以获得所有用户，编辑只能自己)  
GET   /user/list    


参数：
   * 必选：          

返回：  
>
        {
    "info": "",
    "code": "",
    "data": [
        {
            "id": 6,
            "username": "abc",
            "update_time": "2014-11-20 11:05:05",
            "state": true
            "create_time": "2014-11-19 12:19:42",
            "role": "admin"
        },
        {
            "id": 6,
            "username": "abc",
            "update_time": "2014-11-20 11:05:05",
            "state": true
            "create_time": "2014-11-19 12:19:42",
            "role": "admin"
        },
    ],
    "ret": 0
}

#####  获取系统用户用户名和ID列表(管理员可以获得所有用户，编辑只能自己)  
GET   /user/name_id_list    

参数：
   * 必选：          

返回：  

>     
        {
    "info": "",
    "code": "",
    "data": [
        {
            "username": "chengyang",
            "id": 7
        },
        {
            "username": "chenlu",
            "id": 3
        },{...},...
       ]
        }


#####  获取指定客服日志列表详细信息 (管理员可以获得所有用户日志，编辑只能自己)   
GET   /user/log/list

参数：
   * 可选：   
     csid ： 客服ID  
     current : 需要请求的页(default=1)  
     per : 每页显示数(default=50)  

返回：  
>
        {
    "info": "",
    "code": "",
    "data": {
    total : 总页数  
    current: 当前页码  
    data:[
        {
            "admin_user_id": 1,
            "ip": "127.0.0.1",
            "memo": "",
            "content": "高危用户 获取列表",
            "create_time": "2014-11-18 14:59:27",
            "id": 2335
        },{...},..
          ]
        }

#####  获取友加用户惩罚日志   
GET   /user/punish/log        

参数：
   * 必选：    
     u_id:   
   * 可选:   
     current : 需要请求的页(default=1)   
     per : 每页显示数(default=50)        

返回：  

>     
        {
    "info": "",
    "code": "",
    "ret":0 ,
    "data": {
        total :总页数    
    data: [
        {
            "rid":report记录ID
            "user_id": 友加用户id,
        "punish_time": 处罚创建时间,
        "csid": 操作的客服,
        "cs_username": 操作的客服名
        "punish_type": 处罚,
        "timedelta": 处罚持续时间（-1为永久）,
        "url": 处罚的内容url（语音/视频/image）,
            "content": 处罚的内容（文字）,
        "mod": 被处罚资源的场所,
        "mid": 被处罚资源场所的id,
        },
        {...},...
       ]
       }
       
#####  获取友加客服操作报表(admin可以获取所有，editor只能自己)   
GET   /report/sheet

参数：
   * 可选:  
     csid: 客服ID(admin可以获取所有，editor只能自己, default="")  
     start_date: 查询开始时间（缺省：当天0点， 格式"2014-11-26 00:00:00"）   
     end_date:   查询截止时间（缺省：次日0点， 格式"2014-11-27 00:00:00"）      

返回：  

>     
        {
    "info": "",
    "code": "",
    "ret":0,
     data: [
        {   
            "csid": 操作的客服ID,
            "cs_username": 操作的客服用户名,
            "check_num": 审核数量,
            "pass_num": 审核通过数量,
            "skip_num": 审核未通过数量
        },
        {...},...
            ]   

#####  检查系统用户名是否被使用
GET   /user/check_name    

参数：
   * 必选:  
     username: 被检测的用户名   

返回：  

>     
       {"info": "", 
    "code": "", 
    "data": {
        "exist": 1 (0：不存在，1:存在)
    }, 
    "ret": 0}
    
#####  获取举报Profile 
GET   /report/{rid}/profile

参数：
   * 必选:     
     rid : 举报id    
返回：  

>     
        {
    "info": "",
    "code": "",
    "ret":0,
     data: 
    {   
        "mid": 模块id,
        "mod": 模块类型,
        "name": 名称,
        "desc": 描述
    }
    

### server接口
---

##### 获取一批新的像册待审核图片
GET uplus-report/api/get_pic_list

参数： 
   * 必选：   
      csid : 客服ID    
      report_type : 是否高危（ 0:普通，1：高危）   
   * 可选 ：
      size : 一次拉的图片数（default=20）  
  
返回值:
>
    {ret:1,
    info: ''
    data:{
          [{  id : 关联举报记录 的id(唯一标识符)，
              url: 图片的url，
              thumb_url： 图片缩略图url
              reporter: 举报者，
              u_id: 被举报的人， 
              mod: 举报入口
          mid: 模块ID
              }]     
        }
        }

##### 获取下一条被举报消息记录
GET uplus-report/api/get_next_report

参数： 
   * 必选：     
       csid : 客服ID    
       report_type : 是否高危（ 0:普通，1：高危, 2:资源）   
           
  
返回值:
>     
    {ret:1,
    info: ''
    data:{
        mod：{功能模块},  #int
        reporter:{举报人id}, #string
        type:[1,2,3], # list int
        buid:{被举报人ID },#string
            avatar_url:{缩略图},#只有群有缩略图
        memo:{扩充字段}  #string
        msgs:
            [
        {   msg_type:{消息类型}, #int
            msgid:{内容id}, #string
            uucid:{uucid},   #string
            senderid:{发送者id}, #string
            url:{资源URL}, #string
            thumburl:{缩略图} #string
            content:{消息内容}
        }，
            ], #string
        profile:{
            mid:{场所iD（ 群id、秀场id）}, #string
            oid:{owner id} #string
            name:{名字}  #string
            desc:{描述}  #string
            }
        }
        }

##### 获取下一个视频
GET 

参数： 
   * 必选：   
      csid : 客服ID    
      report_type : 是否高危（ 1：高危, 2:资源）     
      resource_type : 视频来源类型（ 303：私聊, 304:群， 305：秀场）     
返回值:
>
    {ret:1,
    info: ''
    data:{
          [{  id : 关联举报记录 的id(唯一标识符)，
              url: 视频的url，
              reporter: 举报者，
              u_id: 被举报的人， 
              mod: 举报入口
              mid: 模块ID
              }]     
        }
        }

##### 获取被举报用户详情：  
GET uplus-report/api/get_user_detail    

参数：   
   * 必选：       
     u_id : u+用户id   

返回值:   
>
        {ret:1,
    info: ''
    data:{
        user_id:{友加用户ID} #int
        user_name:{友加用户名昵称}  #string
        user_desc:{友加用户名简介}  #string
            user_avatar_url:{友加用户头像地址} #url 
        punish_image:{被处罚图片数}               
        punish_video:{被处罚视频数} 
        punish_audio:{被处罚音频数}
        punish_text:{被处罚文本数}  
        }
        }




#####  剩余未处理的举报数
POST   uplus-report/api/get_remain_report

参数：
   * 必选：     
     report_type : 是否高危（ 0:普通，1：高危, 2:资源）    

返回：  
>
        {"ret":0,"data":{"msg_remain":1789,"album_remain":2127}}  
        
#####  获取友加用户惩罚日志   
GET   /uplus-report/api/get_deal_result 

参数：
   * 必选：    
     u_id:  
   * 可选:  
     current : 需要请求的页(default=1)    
     per : 每页显示数(default=50)         

返回：  

>     
        {
    "info": "",
    "code": "",
    "ret":0,
    "data": {
        total : 总页数  
        current： 当前页数
    data: [
        {   
            "rid": : report记录ID
            "user_id": 友加用户id,
        "punish_time": 处罚创建时间,
        "csid": 操作的客服,
        "cs_username": 操作的客服名,
        "punish_type": 处罚,
        "timedelta": 处罚持续时间（-1为永久）,
        "url": 处罚的内容url（语音/视频/image）,
            "content": 处罚的内容（文字）,
        "mod": 被处罚资源的场所,
        "mid": 被处罚资源场所的id,
        },
        {...},...
       ]
       }
       
       
#####  获取客服操作报表 
GET   /uplus-report/api/get_customer_stat

参数：
   * 可选:  
     csid: 客服ID(admin可以获取所有，editor只能自己, default="")  
     start_date: 查询开始时间（缺省：当天0点， 格式"2014-11-26 00:00:00"）   
     end_date:   查询截止时间（缺省：次日0点， 格式"2014-11-27 00:00:00"）      

返回：  

>     
        {
    "info": "",
    "code": "",
    "ret":0,
     data: [
        {   
            "csid": 操作的客服ID,
            "cs_username": 操作的客服用户名,
            "check_num": 审核数量,
            "pass_num": 审核通过数量,
            "skip_num": 审核未通过数量
        },
        {...},...
            ]   


#####  获取举报Profile 
GET   /uplus-report/api/get_profile

参数：
   * 必选:     
     rid : 举报id    
返回：  

>     
        {
    "info": "",
    "code": "",
    "ret":0,
     data: 
    {   
        "mid": 模块id,
        "mod": 模块类型,
        "name": 名称,
        "desc": 描述
    }
            
            

# 其它
---

*  [**处罚接口**与**被举报message**参数对照](https://github.com/youjia/youjia-api/blob/master/docs/report-profile-punish.JPG "参数图解")   

* 惩罚关联：

>     
    "reasons": [
        {
            "id": 1,
            "title": "广告"
        },
        {
            "id": 2,
            "title": "色情"
        },
        {
            "id": 3,
            "title": "敏感话题"
        }
    ],
    "module_types": [
        {
            "punishes": [
                {
                    "required_time": true,
                    "id": 101,
                    "title": "禁言"
                },
                {
                    "required_time": false,
                    "id": 103,
                    "title": "删除资源"
                }
            ],
            "id": 1,
            "title": "大厅"
        },
        {
            "punishes": [
                {
                    "required_time": true,
                    "id": 101,
                    "title": "禁言"
                },
                {
                    "required_time": true,
                    "id": 102,
                    "title": "关闭秀场"
                },
                {
                    "required_time": false,
                    "id": 103,
                    "title": "删除资源"
                },
                {
                    "required_time": true,
                    "id": 104,
                    "title": "登录限制"
                }
            ],
            "id": 2,
            "title": "秀场"
        },
        {
            "punishes": [
                {
                    "required_time": false,
                    "id": 103,
                    "title": "删除资源"
                },
                {
                    "required_time": false,
                    "id": 105,
                    "title": "解散群"
                },
                {
                    "required_time": false,
                    "id": 106,
                    "title": "踢出群"
                }
            ],
            "id": 3,
            "title": "群"
        },
        {
            "punishes": [
                {
                    "required_time": false,
                    "id": 103,
                    "title": "删除资源"
                },
                {
                    "required_time": true,
                    "id": 104,
                    "title": "登录限制"
                }
            ],
            "id": 4,
            "title": "用户"
        }
    ],


###### 消息惩罚二级关联:    

| |*Profile*|*message*|
| :------------ |:---------------|:-----|
|大厅|无|大厅： 禁言，删除资源|
| | |用户 : 限制登录，删除资源| 
|秀场|秀场：关闭秀场|秀场：禁言， 删除资源|
| |用户 : 限制登录|用户 : 限制登录，删除资源|
|群|群：解散群|群：踢出群， 删除资源|
| |用户 : 限制登录|用户 : 限制登录，删除资源|
|私聊|用户 : 限制登录|用户 : 限制登录，删除资源|
|个人|用户 : 限制登录|用户 : 限制登录，删除资源|